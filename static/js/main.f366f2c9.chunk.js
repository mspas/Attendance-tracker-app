(this["webpackJsonppresence-tracker-app"]=this["webpackJsonppresence-tracker-app"]||[]).push([[0],{50:function(e,t,a){},55:function(e,t,a){e.exports=a(87)},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(21),i=a.n(s),c=a(32),o=(a(60),a(18)),l=(a(61),a(6)),u=a(7),d=a(11),m=a(9),p=a(8),h=a(10),v=(a(62),a(28)),g=(a(63),a(92)),E=a(88),k=a(93),b=a(17),f=a(15),y=a(51),C=a(34),w=a.n(C),N={courseId:1,courseCode:"E05-10b",lecturesAmount:6,students:[{name:"Henryk de Valois",email:"200001@student.pwr.wroc.pl",indeks:200001,presences:0},{name:"Istvan Bathory",email:"111111@student.pwr.wroc.pl",indeks:111111,presences:4},{name:"Sigismund Vasa",email:"222222@student.pwr.wroc.pl",indeks:222222,presences:4},{name:"W\u0142adys\u0142aw Vasa",email:"333333@student.pwr.wroc.pl",indeks:333333,presences:3},{name:"Jan Kazimierz Vasa",email:"444444@student.pwr.wroc.pl",indeks:444444,presences:2},{name:"Micha\u0142 Korybut Wi\u015bniowiecki",email:"555555@student.pwr.wroc.pl",indeks:555555,presences:1},{name:"Jan Sobieski",email:"666666@student.pwr.wroc.pl",indeks:666666,presences:5}]},O={courseId:1,courseCode:"E05-10b",students:[{student:{name:"Henryk de Valois",email:"200001@student.pwr.wroc.pl",indeks:200001},presences:[]},{student:{name:"Istvan Bathory",email:"111111@student.pwr.wroc.pl",indeks:111111},presences:[1,2,3,6]},{student:{name:"Sigismund Vasa",email:"222222@student.pwr.wroc.pl",indeks:222222},presences:[2,3,4,6]},{student:{name:"W\u0142adys\u0142aw Vasa",email:"333333@student.pwr.wroc.pl",indeks:333333},presences:[1,3,5]},{student:{name:"Jan Kazimierz Vasa",email:"444444@student.pwr.wroc.pl",indeks:444444},presences:[1,6]},{student:{name:"Micha\u0142 Korybut Wi\u015bniowiecki",email:"555555@student.pwr.wroc.pl",indeks:555555},presences:[1]},{student:{name:"Jan Sobieski",email:"666666@student.pwr.wroc.pl",indeks:666666},presences:[1,2,3,4,5]}],lecturesAmount:6},L={lecturerId:5,courses:[{id:2,name:"Computer Project Management",lectures:[{id:7,date:"2020-05-05 at 09:00:00"},{id:8,date:"2020-05-06 at 09:00:00"},{id:9,date:"2020-05-07 at 09:00:00"},{id:10,date:"2020-05-08 at 09:00:00"},{id:11,date:"2020-05-09 at 09:00:00"},{id:12,date:"2020-05-10 at 09:00:00"}]},{id:6,name:"Elect. media in Busi.",lectures:[{id:13,date:"2020-05-05 at 01:00:00"},{id:14,date:"2020-05-06 at 01:00:00"},{id:15,date:"2020-05-07 at 01:00:00"},{id:16,date:"2020-05-08 at 01:00:00"},{id:17,date:"2020-05-09 at 01:00:00"},{id:18,date:"2020-05-10 at 01:00:00"},{id:19,date:"2020-05-11 at 01:00:00"},{id:20,date:"2020-05-12 at 01:00:00"}]}]},D={lecturerId:5,schedule:[{date:"2020-05-04",day:"MON",lectures:[{course:"Elect. media in Busi.",code:"E08-60a",lecturerName:"M. Spas",building:"C4",room:"s239",time:"19:00",duration:120}]},{date:"2020-05-05",day:"TUE",lectures:[{course:"Computer Project Management",code:"E08-59a",lecturerName:"M. Spas",building:"C4",room:"s239",time:"09:00",duration:105},{course:"Elect. media in Busi.",code:"E08-60a",lecturerName:"M. Spas",building:"C4",room:"s239",time:"13:00",duration:165},{course:"Elect. media in Busi.",code:"E08-60a",lecturerName:"M. Spas",building:"C4",room:"s239",time:"16:00",duration:105}]},{date:"2020-05-06",day:"WED",lectures:[{course:"Computer Project Management",code:"E08-59a",lecturerName:"M. Spas",building:"C4",room:"s239",time:"07:30",duration:105},{course:"Elect. media in Busi.",code:"E08-60a",lecturerName:"M. Spas",building:"C4",room:"s239",time:"13:00",duration:165}]},{date:"2020-05-07",day:"THU",lectures:[{course:"Computer Project Management",code:"E08-59a",lecturerName:"M. Spas",building:"C4",room:"s239",time:"10:00",duration:105},{course:"Elect. media in Busi.",code:"E08-60a",lecturerName:"M. Spas",building:"C4",room:"s239",time:"12:30",duration:165}]},{date:"2020-05-08",day:"FRI",lectures:[]},{date:"2020-05-09",day:"SAT",lectures:[{course:"Computer Project Management",code:"E08-59a",lecturerName:"M. Spas",building:"C4",room:"s239",time:"09:00",duration:105},{course:"Elect. media in Busi.",code:"E08-60a",lecturerName:"M. Spas",building:"C4",room:"s239",time:"11:00",duration:155}]},{date:"2020-05-10",day:"SUN",lectures:[{course:"Computer Project Management",code:"E08-59a",lecturerName:"M. Spas",building:"C4",room:"s239",time:"16:15",duration:105},{course:"Elect. media in Busi.",code:"E08-60a",lecturerName:"M. Spas",building:"C4",room:"s239",time:"13:00",duration:165}]}]},S={lectureId:1,date:"2020-05-04 at 12:00:00",building:"C4",room:"s239",lecturer:"Mirek Rajczyk",students:[{name:"Istvan Bathory",email:"111111@student.pwr.wroc.pl",indeks:111111},{name:"W\u0142adys\u0142aw Vasa",email:"333333@student.pwr.wroc.pl",indeks:333333},{name:"Jan Kazimierz Vasa",email:"444444@student.pwr.wroc.pl",indeks:444444},{name:"Micha\u0142 Korybut Wi\u015bniowiecki",email:"555555@student.pwr.wroc.pl",indeks:555555},{name:"Jan Sobieski",email:"666666@student.pwr.wroc.pl",indeks:666666}]},I=function(){function e(){Object(l.a)(this,e),this.getExampleToken=this.getExampleToken.bind(this),this.getCoursesDetails=this.getCoursesDetails.bind(this),this.getCoursesSummary=this.getCoursesSummary.bind(this),this.getLecturersCourses=this.getLecturersCourses.bind(this),this.getLecturersSchedule=this.getLecturersSchedule.bind(this),this.getLecturesDetails=this.getLecturesDetails.bind(this)}return Object(u.a)(e,[{key:"getExampleToken",value:function(){return"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiIiLCJpYXQiOjE1ODkyOTI5OTksImV4cCI6bnVsbCwiYXVkIjoiIiwic3ViIjoiMTIzNDU2QHN0dWRlbnQucHdyLndyb2MucGwiLCJ1c2VySWQiOiI1IiwibmFtZSI6Ik1hcmNpbiBTcGFzacWEc2tpIiwicm9sZSI6IkxFQ1RVUkVSIn0.0Fqxiyv6YX5CalF_Fm3c70IBaVy7ZC5c5pfrdFtIzi4"}},{key:"getCoursesDetails",value:function(){return Promise.resolve(N)}},{key:"getCoursesSummary",value:function(){return Promise.resolve(O)}},{key:"getLecturersCourses",value:function(){return Promise.resolve(L)}},{key:"getLecturersSchedule",value:function(){return Promise.resolve(D)}},{key:"getLecturesDetails",value:function(){return Promise.resolve(S)}}]),e}(),j=function(){function e(t){Object(l.a)(this,e),this._apiMock=new I,this.domain="http://25.23.181.97:8090",this.fetch=this.fetch.bind(this),this.login=this.login.bind(this),this.getUserId=this.getUserId.bind(this),this.getName=this.getName.bind(this),this.getEmail=this.getEmail.bind(this)}return Object(u.a)(e,[{key:"login",value:function(e,t){return this.setToken(this._apiMock.getExampleToken()),Promise.resolve(this._apiMock.getExampleToken())}},{key:"loggedIn",value:function(){return!!this.getToken()}},{key:"isTokenExpired",value:function(e){try{return w()(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"setToken",value:function(e){localStorage.setItem("token",e)}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"getUserId",value:function(e){return 5}},{key:"getName",value:function(e){try{return w()(e).name}catch(t){return null}}},{key:"getEmail",value:function(e){try{return w()(e).sub}catch(t){return null}}},{key:"logout",value:function(e,t){return localStorage.removeItem("token"),Promise.resolve(!0)}},{key:"fetch",value:function(e){function t(t,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var a={"Content-Type":"application/json"};return this.loggedIn()&&(a["X-Authorization"]="Bearer "+this.getToken()),fetch(e,Object(y.a)({headers:a},t)).then(this._checkStatus).then((function(e){return e.json()}))}))},{key:"_checkStatus",value:function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,alert("Error database fetch data"),t}}]),e}(),M=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(v.a)({},r,n))},a.onSubmit=function(e){e.preventDefault(),a._auth.login(a.state.Email,a.state.Password).then((function(e){a.props.history.replace("/dashboard")})).catch((function(e){alert(e)}))},a.state={Email:"",Password:""},a._auth=new j,a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(g.a,{className:"form-signin",onSubmit:this.onSubmit},r.a.createElement(g.a.Group,{controlId:"formEmail"},r.a.createElement(E.a,null,r.a.createElement(E.a.Prepend,null,r.a.createElement(E.a.Text,{id:"inputGroupPrepend"},r.a.createElement(b.a,{className:"panel-icon",icon:f.c}))),r.a.createElement(g.a.Control,{type:"text",name:"Email",placeholder:"Email","aria-describedby":"inputGroupPrepend",onChange:this.handleInputChange,required:!0}),r.a.createElement(g.a.Control.Feedback,{type:"invalid"},"Please type your email address."))),r.a.createElement(g.a.Group,{controlId:"formPassword"},r.a.createElement(E.a,null,r.a.createElement(E.a.Prepend,null,r.a.createElement(E.a.Text,{id:"inputGroupPrepend"},r.a.createElement(b.a,{className:"panel-icon",icon:f.d}))),r.a.createElement(g.a.Control,{type:"password",name:"Password",placeholder:"Password","aria-describedby":"inputGroupPrepend",onChange:this.handleInputChange,required:!0}),r.a.createElement(g.a.Control.Feedback,{type:"invalid"},"Please type your password."))),r.a.createElement(k.a,{variant:"primary",type:"submit"},"Login"))}}]),t}(r.a.Component),x=a(89),P=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).toggleClass=a.toggleClass.bind(Object(p.a)(a)),a.state={active:!1},a._auth=new j,a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this._auth.loggedIn()&&this.props.history.replace("/")}},{key:"toggleClass",value:function(){var e=this.state.active;this.setState({active:!e})}},{key:"render",value:function(){return r.a.createElement(x.a,{className:"center"},r.a.createElement("div",{className:"sign-in-panel"},r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"slope slope1"},r.a.createElement("span",null,"Sign In")),r.a.createElement("div",{className:"slope slope0"})),r.a.createElement("div",{className:"row panel-content"},r.a.createElement(M,{history:this.props.history})),r.a.createElement("div",{className:"footer-panel"},r.a.createElement("div",{className:"slope slope2"}),r.a.createElement("p",null,"CheckIT ",r.a.createElement("span",null,"@2020")))))}}]),t}(r.a.Component),T=a(33);a(74),a(75);var _=a(16),F=a(90),B=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={activeFlags:[],sidebarHidden:!1},a.onCourseClick=a.onCourseClick.bind(Object(p.a)(a)),a.onScheduleClick=a.onScheduleClick.bind(Object(p.a)(a)),a.slideSidebar=a.slideSidebar.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.courses.length>0&&this.setDefaultFlags()}},{key:"componentDidUpdate",value:function(e,t){this.props.courses!==e.courses&&this.setDefaultFlags(),this.props.courseId!==e.courseId&&this.setDefaultFlags()}},{key:"setDefaultFlags",value:function(){var e=this;return new Promise((function(t,a){for(var n=[],r=0;r<e.props.courses.length;r++)n.push(!1);e.setState({activeFlags:n},(function(){t(e.state.activeFlags)}))}))}},{key:"setActiveFlag",value:function(e){var t=this;this.setDefaultFlags().then((function(a){a[e]=!0,t.setState({activeFlags:a})}))}},{key:"onCourseClick",value:function(e,t){this.setActiveFlag(t),this.props.changeCourse(e.id),this.props.eraseLecture()}},{key:"onScheduleClick",value:function(){this.setDefaultFlags(),this.props.eraseCourse(),this.props.eraseLecture()}},{key:"slideSidebar",value:function(){var e=this;this.setState({sidebarHidden:!this.state.sidebarHidden},(function(){document.getElementById("sidebar").style.left=e.state.sidebarHidden?"0px":"-310px"}))}},{key:"render",value:function(){var e=this;if(this.props.isLoading)return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{id:"sidebar",className:"course-menu"},r.a.createElement("div",{className:"logo"}),r.a.createElement("p",{className:"title-text"},"Your courses"),r.a.createElement("div",{className:"spinner-wrap center"},r.a.createElement(F.a,{animation:"border",variant:"primary",role:"status"}))));var t=this.props.courses.map((function(t,a){return r.a.createElement("li",{key:a},r.a.createElement(_.Link,{className:e.state.activeFlags[a]?"list-elem active":"list-elem",to:"",onClick:e.onCourseClick.bind(null,t,a)},r.a.createElement("span",{className:"course-name"},t.name)))}));return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{id:"sidebar",className:"course-menu"},r.a.createElement("div",{className:"logo"}),r.a.createElement("p",{className:"logged-user"},"Welcome, ",this.props.loggedName),r.a.createElement("span",{className:"burger-wrap",onClick:this.slideSidebar},this.state.sidebarHidden?r.a.createElement(b.a,{className:"panel-icon",icon:f.e}):r.a.createElement(b.a,{className:"panel-icon",icon:f.a})),r.a.createElement("button",{className:"btn-schedule",onClick:this.onScheduleClick},"Your Week Schedule"),r.a.createElement("ul",null,t)))}}]),t}(r.a.Component),U=(a(83),a(29)),H=a.n(U),V=a(91),J=a(30),R=a.n(J),A=a(31),G=a.n(A),W=(a(50),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e)))._auth=new j,a.state={url:"http://25.23.181.97:8090"},a.handleExportToPDF=a.handleExportToPDF.bind(Object(p.a)(a)),a.onMarkPresenceClick=a.onMarkPresenceClick.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"isPresent",value:function(e){for(var t=0;t<this.props.presenceData.students.length;t++){if(this.props.presenceData.students[t].indeks===e)return!0}return!1}},{key:"handleExportToPDF",value:function(){var e=this,t=document.getElementById("table-to-export");R()(t).then((function(t){var a=t.toDataURL("image/png"),n=new G.a({orientation:"landscape"});n.addImage(a,"PNG",0,0),n.save(e.props.courseName+"("+e.props.courseData.courseCode+") - Lecture"+e.props.lectureIndex+".pdf")}))}},{key:"onMarkPresenceClick",value:function(e,t){this.props.presenceData.lectureId,e.id;alert("Funcionality turned off in this demo version")}},{key:"render",value:function(){var e=this;if(this.props.isLoading)return r.a.createElement("div",{className:"spinner-wrap center"},r.a.createElement(F.a,{animation:"border",variant:"primary",role:"status"}));var t=this.props.courseData.students.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1,"."),r.a.createElement("td",null,t.name),r.a.createElement("td",{className:"text-center"},t.indeks),r.a.createElement("td",null,t.email),r.a.createElement("td",{className:"text-center"},e.isPresent(t.indeks)?"Yes":" "),r.a.createElement("td",{className:"text-center"},t.presences),r.a.createElement("td",{className:"mark-presence"},e.isPresent(t.indeks)?" ":r.a.createElement(_.Link,{className:"btn-mark-presence",to:"",onClick:e.onMarkPresenceClick.bind(null,t,a)},r.a.createElement("span",null,r.a.createElement(b.a,{icon:f.b})))))}));return r.a.createElement("div",{className:"presence-list-wrap"},r.a.createElement("div",{className:"buttons-wrap"},r.a.createElement(H.a,{id:"test-table-xls-button",className:"button btn",table:"table-to-export",filename:this.props.courseName+"("+this.props.courseData.courseCode+") - Lecture"+this.props.lectureIndex,sheet:"tablexls",buttonText:"Export to XLS"}),r.a.createElement(k.a,{className:"button",variant:"info",onClick:this.handleExportToPDF},"Export to PDF")),r.a.createElement(V.a,{responsive:!0,bordered:!0,hover:!0,id:"table-to-export"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Student's number"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Present"),r.a.createElement("th",null,"Presence in total"),r.a.createElement("th",null,"Mark presence"))),r.a.createElement("tbody",null,t)))}}]),t}(r.a.Component)),z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={dummyLectures:[]},a.handleExportToPDF=a.handleExportToPDF.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleExportToPDF",value:function(){var e=this,t=document.getElementById("table-to-export");R()(t).then((function(t){var a=t.toDataURL("image/png"),n=new G.a({orientation:"landscape"});n.addImage(a,"PNG",0,0),n.save(e.props.courseName+"("+e.props.courseData.courseCode+") - Presence Overview.pdf")}))}},{key:"isPresent",value:function(e,t){for(var a=0;a<t.length;a++)if(t[a]===e)return!0;return!1}},{key:"render",value:function(){var e=this;if(this.props.isLoading)return r.a.createElement("div",{className:"spinner-wrap center"},r.a.createElement(F.a,{animation:"border",variant:"primary",role:"status"}));var t=this.props.overviewData.students.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1,"."),r.a.createElement("td",null,t.student.name),r.a.createElement("td",{className:"text-center"},t.student.indeks),e.state.dummyLectures.map((function(a,n){return r.a.createElement("td",{className:"text-center",key:n},e.isPresent(a,t.presences)?"Yes":" ")})),r.a.createElement("td",{className:"text-center"},t.presences.length))})),a=this.state.dummyLectures.map((function(e,t){return r.a.createElement("th",{key:t},"Lecture "+e)}));return r.a.createElement("div",{className:"presence-list-wrap"},r.a.createElement("div",{className:"buttons-wrap"},r.a.createElement(H.a,{id:"test-table-xls-button",className:"button btn",table:"table-to-export",filename:this.props.courseName+"("+this.props.courseData.courseCode+") - Presence Overview",sheet:"tablexls",buttonText:"Export to XLS"}),r.a.createElement(k.a,{className:"button",variant:"info",onClick:this.handleExportToPDF},"Export to PDF")),r.a.createElement(V.a,{responsive:!0,bordered:!0,hover:!0,id:"table-to-export"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Student's number"),a,r.a.createElement("th",null,"Presence in total"))),r.a.createElement("tbody",null,t)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){for(var a=[],n=0;n<e.overviewData.lecturesAmount;n++)a.push(n+1);return{dummyLectures:a}}}]),t}(r.a.Component),X=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e)))._auth=new j,a._apiMock=new I,a.state={url:"http://25.23.181.97:8090",overviewData:null,courseOverviewClicked:!1,isLoadingOverview:!0,presenceLoading:!0},a.onBackClick=a.onBackClick.bind(Object(p.a)(a)),a.onLectureClick=a.onLectureClick.bind(Object(p.a)(a)),a.onOverviewClick=a.onOverviewClick.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.props.courseId!==e.courseId&&this.setState({courseOverviewClicked:!1,isLoadingOverview:!0})}},{key:"onBackClick",value:function(){this.props.eraseLecture(),this.setState({courseOverviewClicked:!1,isLoadingOverview:!0})}},{key:"onLectureClick",value:function(e,t,a){this.onLectureClickMockup(e,t)}},{key:"onOverviewClick",value:function(){this.onOverviewClickMockup()}},{key:"render",value:function(){var e=this;if(!this.props.isLoading&&!this.props.courseData)return r.a.createElement("div",{className:"noselect-wrap center"},r.a.createElement("span",{className:"noselect-info"},"Select course from sidebar menu to see its details!"));if(this.props.isLoading)return r.a.createElement("div",{className:"spinner-wrap center"},r.a.createElement(F.a,{animation:"border",variant:"primary",role:"status"}));var t=this.props.lectures.lectures.map((function(t,a){var n=new Date(t.date.replace(" at ","T")),s=("0"+n.getDate()).slice(-2)+"-"+("0"+(n.getMonth()+1)).slice(-2)+"-"+n.getFullYear()+" ",i=("0"+n.getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2);return r.a.createElement(_.Link,{className:"lecture-elem",to:"",key:a,onClick:e.onLectureClick.bind(null,t,a)},r.a.createElement("p",null,"Lecture ",a+1," ",r.a.createElement("span",{className:"lecture-hour"},i),r.a.createElement("span",{className:"lecture-date"},s)))}));return r.a.createElement("div",null,r.a.createElement("div",{className:"course-name slope slope3"},this.props.lectures.name),r.a.createElement("div",{className:"course-code slope slope4"},this.props.courseData.courseCode),r.a.createElement("div",{className:"lecture-list"},-1===this.props.lectureId&&!this.state.courseOverviewClicked&&r.a.createElement("div",null,r.a.createElement(k.a,{variant:"info",onClick:this.onOverviewClick.bind(null)},"Course overview"),t)),-1!==this.props.lectureId&&r.a.createElement("div",{className:"presence-wrap"},r.a.createElement("div",{className:"btn-wrap"},r.a.createElement(k.a,{variant:"secondary",onClick:this.onBackClick},"Back")),r.a.createElement(W,{courseName:this.props.lectures.name,courseData:this.props.courseData,lectureIndex:this.state.lectureIndex,presenceData:this.state.presenceData,isLoading:this.state.presenceLoading})),-1===this.props.lectureId&&this.state.courseOverviewClicked&&r.a.createElement("div",{className:"presence-wrap"},r.a.createElement("div",{className:"btn-wrap"},r.a.createElement(k.a,{variant:"secondary",onClick:this.onBackClick},"Back")),r.a.createElement(z,{courseName:this.props.lectures.name,courseData:this.props.courseData,overviewData:this.state.overviewData,isLoading:this.state.isLoadingOverview})))}},{key:"onLectureClickMockup",value:function(e,t){var a=this;this.props.changeLecture(e.id),this._apiMock.getLecturesDetails().then((function(e){a.setState({lectureIndex:t+1,presenceData:e,presenceLoading:!1})}))}},{key:"onOverviewClickMockup",value:function(){var e=this;this._apiMock.getCoursesSummary().then((function(t){e.setState({overviewData:t,courseOverviewClicked:!0,isLoadingOverview:!1})}))}}]),t}(r.a.Component),Y=(a(84),["#f2fac2","#c4fada","#fde0ed","#b0c0c0","#cbf0f0"]),K=function(e){function t(e){var a;Object(l.a)(this,t),a=Object(d.a)(this,Object(m.a)(t).call(this,e));for(var n=[],r=7;r<22;r++){var s=("0"+r).slice(-2)+":00";n.push(new Date("2000-01-01T"+s))}return a.state={hoursD:n},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t){if(null!==this.props.scheduleData){var a=0;this.props.scheduleData.schedule.forEach((function(e){e.lectures.forEach((function(e){var t=new Date("2000-01-01T"+e.time),n="lectureD"+a+"H"+t.getHours(),r=document.getElementById(n),s=100*e.duration/60,i=100*t.getMinutes()/60;r.style.top=t.getMinutes()>0?i+"%":"0",r.style.height=s+"%",r.style.background=Y[Math.floor(Math.random()*Y.length)];var c=(60*t.getHours()+t.getMinutes()+e.duration)/60,o=60*(c-Math.floor(c)),l=Math.floor(c)+":"+("0"+Math.ceil(o)).slice(-2);r.innerHTML="<p>"+e.course.slice(0,20)+"...</p><p>"+e.building+" "+e.room+"</p><p>"+e.time+"-"+l+"</p>"})),a++}))}}},{key:"isLecture",value:function(e,t){for(var a=0;a<e.length;a++){var n=new Date("2000-01-01T"+e[a].time).getHours();if(t.getHours()===n)return!0}return!1}},{key:"render",value:function(){var e=this;if(this.props.isLoading)return r.a.createElement("div",{className:"spinner-wrap center"},r.a.createElement(F.a,{animation:"border",variant:"primary",role:"status"}));var t=this.props.scheduleData.schedule.map((function(e,t){return r.a.createElement("th",{key:t},e.day)})),a=this.state.hoursD.map((function(t,a){var n=("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2);return r.a.createElement("tr",{key:a},r.a.createElement("td",{className:"hour"},n),e.props.scheduleData.schedule.map((function(a,n){return r.a.createElement("td",{key:n},e.isLecture(a.lectures,t)?r.a.createElement("div",{id:"lectureD"+n+"H"+t.getHours(),className:"lecture-block"}):" ")})))}));return r.a.createElement("div",{className:"schedule-wrap"},r.a.createElement(V.a,{responsive:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"hour"},"Hour"),t)),r.a.createElement("tbody",null,a)))}}]),t}(r.a.Component),Q=["January","February","March","April","May","June","July","August","September","October","November","December"],q=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Z=function(){function e(){Object(l.a)(this,e),this.getMonthName=this.getMonthName.bind(this),this.getDayName=this.getDayName.bind(this)}return Object(u.a)(e,[{key:"getMonthName",value:function(e){return Q[e]}},{key:"getDayName",value:function(e){return q[e]}}]),e}(),$=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this)))._auth=new j,e._apiMock=new I,e._data=new Z,e.state={url:"http://25.23.181.97:8090",lecturer_id:e._auth.getUserId(e._auth.getToken()),loggedName:e._auth.getName(e._auth.getToken()),lecturesLoading:!1,coursesLoading:!0,scheduleLoading:!0,courses:[],lectures:[],courseData:null,scheduleData:null,dateString:""},e.handleLogoutClick=e.handleLogoutClick.bind(Object(p.a)(e)),e.handleLecturesForCourse=e.handleLecturesForCourse.bind(Object(p.a)(e)),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getDataInitMockup()}},{key:"componentDidUpdate",value:function(e,t){this.props.courseId!==e.courseId&&(this.setState({lecturesLoading:!0}),-1!==this.props.courseId&&this.handleLecturesForCourseMockup(this.props.courseId))}},{key:"handleLogoutClick",value:function(){var e=this;this._auth.logout(localStorage.getItem("id"),!1).then((function(t){e.props.history.replace("/login")}))}},{key:"getLecturesSet",value:function(e){for(var t=0;t<this.state.courses.length;t++)if(this.state.courses[t].id===e)return this.state.courses[t];return[]}},{key:"handleLecturesForCourse",value:function(e){var t=this,a=this.getLecturesSet(e);this._auth.fetch(this.state.url+"/api/courses/"+e+"/details",{method:"GET"}).then((function(e){t.setState({courseData:e,lectures:a,lecturesLoading:!1}),console.log(JSON.stringify(e))}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(B,{courses:this.state.courses,loggedName:this.state.loggedName,isLoading:this.state.coursesLoading,courseId:this.props.courseId,lectureId:this.props.lectureId,changeCourse:this.props.changeCourse,eraseCourse:this.props.eraseCourse,changeLecture:this.props.changeLecture,eraseLecture:this.props.eraseLecture}),r.a.createElement(x.a,{className:"content"},r.a.createElement(_.Link,{className:"btn-logout",to:"",onClick:this.handleLogoutClick},r.a.createElement("span",null,"Logout")),r.a.createElement("div",{className:"main-container"},r.a.createElement("div",{className:"course-name slope slope3"},this.state.dateString),r.a.createElement("div",{className:"course-code slope slope4"},"Schedule"),-1!==this.props.courseId?r.a.createElement(X,{courseData:this.state.courseData,lectures:this.state.lectures,isLoading:this.state.lecturesLoading,courseId:this.props.courseId,lectureId:this.props.lectureId,changeLecture:this.props.changeLecture,eraseLecture:this.props.eraseLecture}):r.a.createElement(K,{scheduleData:this.state.scheduleData,isLoading:this.state.scheduleLoading}))))}},{key:"getDataInitMockup",value:function(){var e=this;this._apiMock.getLecturersCourses().then((function(t){e.setState({courses:t.courses,coursesLoading:!1})})),this._apiMock.getLecturersSchedule().then((function(t){var a=new Date(t.schedule[0].date),n=new Date(t.schedule[6].date),r=("0"+a.getDate()).slice(-2)+" "+e._data.getMonthName(a.getMonth())+" - "+("0"+n.getDate()).slice(-2)+" "+e._data.getMonthName(n.getMonth());e.setState({scheduleData:t,scheduleLoading:!1,dateString:r})}))}},{key:"handleLecturesForCourseMockup",value:function(e){var t=this,a=this.getLecturesSet(e);this._apiMock.getCoursesDetails().then((function(e){t.setState({courseData:e,lectures:a,lecturesLoading:!1})}))}}]),t}(r.a.Component),ee={changeCourse:function(e){return{type:"CHANGE_COURSE",payload:e}},eraseCourse:function(){return{type:"ERASE_COURSE"}},changeLecture:function(e){return{type:"CHANGE_LECTURE",payload:e}},eraseLecture:function(){return{type:"ERASE_LECTURE"}}},te=function(e){var t=new j;return function(a){function n(){var e;return Object(l.a)(this,n),(e=Object(d.a)(this,Object(m.a)(n).call(this))).state={user:null},e}return Object(h.a)(n,a),Object(u.a)(n,[{key:"componentDidMount",value:function(){if(t.loggedIn())try{var e=t.getName(t.getToken());this.setState({user:e})}catch(a){t.logout(),this.props.history.replace("/login")}else this.props.history.replace("/login")}},{key:"render",value:function(){return this.state.user?r.a.createElement(e,{history:this.props.history,user:this.state.user}):null}}]),n}(n.Component)}(Object(T.b)((function(e){return{courseId:e.courseId,lectureId:e.lectureId}}),ee)($));var ae=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("main",null,r.a.createElement(c.a,null,r.a.createElement("div",null,r.a.createElement(o.b,{exact:!0,path:"/login",component:P}),r.a.createElement(o.b,{exact:!0,path:"/dashboard",component:te}),r.a.createElement(o.b,{exact:!0,path:"/",render:function(){return r.a.createElement(o.a,{to:"/dashboard"})}})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(86);var ne=a(22),re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_COURSE":return t.payload;case"ERASE_COURSE":return-1;default:return e}},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_LECTURE":return t.payload;case"ERASE_LECTURE":return-1;default:return e}},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return!e;default:return e}},ce=Object(ne.b)({courseId:re,lectureId:se,islogged:ie}),oe=Object(ne.c)(ce,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());i.a.render(r.a.createElement(T.a,{store:oe},r.a.createElement(c.a,null,r.a.createElement(ae,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[55,1,2]]]);
//# sourceMappingURL=main.f366f2c9.chunk.js.map